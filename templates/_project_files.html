<!-- templates/_project_files.html -->
<aside id="projectFiles" class="fixed right-0 top-0 h-full w-64 bg-gray-900 text-gray-100 shadow-lg z-30 flex flex-col">
    <div class="p-4 font-bold text-xl border-b border-gray-800">Project Files</div>
    <div class="flex-1 overflow-y-auto p-4">
         <h3 class="text-sm font-semibold text-gray-400 mb-2">Recent Projects</h3>
            <div id="sidebar-projects">
                <!-- This will be populated dynamically -->
                <p class="text-sm text-gray-500">Loading projects...</p>
            </div>
    </div>
</aside>

<script>
// Load projects in sidebar
async function loadSidebarProjects() {
    try {
        const response = await fetch('/api/projects/');
        if (response.ok) {
            const projects = await response.json();
            const container = document.getElementById('sidebar-projects');
            
            if (projects.length === 0) {
                container.innerHTML = '<p class="text-sm text-gray-500">No projects yet</p>';
            } else {
                container.innerHTML = projects.slice(0, 5).map(project => 
                    `<div class="text-sm py-1 px-2 rounded hover:bg-gray-800 cursor-pointer" data-project-id="${project.id}">
                        <div class="font-medium">${project.name}</div>
                        <div class="text-gray-400 text-xs truncate">${project.description || 'No description'}</div>
                    </div>`
                ).join('');
            }
        }
    } catch (error) {
        console.error('Error loading projects:', error);
        document.getElementById('sidebar-projects').innerHTML = '<p class="text-sm text-red-400">Error loading projects</p>';
    }
}

// Load projects when page loads
document.addEventListener('DOMContentLoaded', loadSidebarProjects);
</script>